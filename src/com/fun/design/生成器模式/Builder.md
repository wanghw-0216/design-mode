# 生成器模式
## 定义
将一个复杂对象的构建与它的表示分离，使得同样的构建过程可以创建不同的表示。
##生成器模式的结构和说明
- **builder**:生成器接口，定义创建product对象所需的各个部件的操作。即知道每个部件的功能如何实现，也知道如何见该部件装配到产品中。（重要部分）
- ConcreteBuilder:具体的生成器实现，实现各个部件的创建，并组装product对象的各个组件，同时提供让客户端获取对象的方法。
- **Director**:指导者，用来使用builder接口，以一个统一的过程来构建所需的product。负责整体的构建算法，通常是分步骤来执行的。（重要部分）
- Product:产品，表示被生成器构建的复杂对象，包含多个部件。
## 生成器模式的功能
- 构建复杂的产品，而且是细化的、分步骤的构建产品。一步步解决构造复杂对象的问题。
- 构建过程是统一的、固定不变的，变化的部分放到生成器部分了，只要配置不同的生成器，那么同样的构建过程就能构建出不同给的产品来。
## 生成器两个重要部分：
- 部件构建和产品装配--builder。
- 整体构建的算法--Director。
生成器中强调的是，固定**整体构建的算法**，灵活扩展和切换部件的**具体构造和产品装配**的方式。所以要严格区分这两个部分。
## 生成器模式的使用
- 客户端创造Director。
- Director里面封装整体构建算法。
- Director根据需要调用Builder。
- Builder封装具体部件的构建功能。
还有一种退化的方式，就是把客户端直接当做Director，然后客户端操作Builder构建产品。
## 生成器的实现
- 在Builder接口的实现中，每个方法可以有两部分功能：1. 创建部件对象。2. 组装部件。
- 在构建部件的方法里面实现选择并创建具体的部件对象，然后再把这个部件对象组装到产品对象中。这样，builder就可以和工厂方法配合使用了。
- 如果在实现builder的时候，只有创建对象的功能，没有组装的功能，那么这个时候的builder实现跟抽象工厂的实现是类似的。
## 指导者的实现
- 指导者承担的是整体的构建算法部分，是相对不变的部分，所以，把变化的部分分离出去是很重要的。
- 指导者分离出去的变化的部分放到生成器里，所以指导者知道整体的构建算法，却不知道如何具体的创建和装配部件对象。
- 真正的指导者不仅仅是按照一定顺序调用生成器来生成对象，而是由较为复杂的算法和运算过程。运算过程中根据需要调用生成器来生成对象。
## 指导者跟生成器的交互
生成器模式中，指导者和生成器的交互是通过生成器方法的参数和返回值，来回传递数据。相当于，指导者通过委托的方式把功能交给生成器去完成。
## 返回装配好的产品的方法
标准的生成器模式中，在Builder的实现中会提供一个返回装配好的产品的方法，在Builder接口上没有的。因为，它考虑最终的对象一定要通过部件构建和装配，才能算
真正创建了，而具体干活的就是Builder的实现。指导者是不负责具体部件创建和组装的，因此客户端需要从Builder具体实现里获取装配好的产品。当然，java中也可以
把这个方法放入Buidler接口中。
## 把构建器对象和被构建的对象合并
把构建器对象跟被构建的对象分开，可能会导致，同包下的类，直接使用new创建被构建的对象。所以，更为安全的手段是，将构建器对象作为一个静态内部类放到被构建的对象中。
接着将被构建对象的构造方法私有化，这样可以强制要求使用构建器构建对象。
## 构建器构建复杂对象
构建器可以根据传入的参数，选择合适的方式创建被构建的对象。例如，假如有这么一个类A。A中有个private_addr字段表示私人地址，有个company_addr表示公司地址。
该类创建的时候要求，私人地址跟公司地址只能存在一个。那么使用构建器创建A的时候，可以根据传入的参数去判断该给哪个字段赋值，从而返回对应的被构建对象给客户端。

## 优点：
- 松散耦合
  将构建和产品表现分离。产品的构建过程独立出来，使得个构建算法可以复用，而具体的产品表现可以灵活的、方便的扩展和切换。
- 可以很容易的改变产品的内部表示
  生成器模式中，Builder对象只是提供解扣器给Director使用， 那么具体的部件创建和装配方式是被Builder接口隐藏了的。这样一来，想要改变产品内部表示，
  只需要切换Builder的具体实现即可，不用管Director，因此变得容易。
- 更好的复用性
  构建过程跟具体产品实现分离，这样一来，构建算法可以复用，而且产品的实现也可以复用。
## 本质
分离整体的构建算法和部件构造。
## 适用场景
- 创建对象的算法，应该独立于该对象的组成部分以及它们的装配方式时。
- 同一个构建过程有着不同的表示时。 
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
