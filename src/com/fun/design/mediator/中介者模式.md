# 中介者模式---Mediator
## 定义
用一个中介对象来封装一系列的对象交互。中介者使各对象不需要显示的相互引用，从而使其耦合松散，而且可以独立的改变它们之间的交互。
## 中介者模式解决问题思路
- 引入一个中介对象，让其他对象都只和中介对象交互，而中介对象知道如何与其他所有对象交互。
- 对于中介者来说，所有相互交互的对象，都视为同事类，中介对象负责维护各个同事之间的关系，而所有同事类都只是和中介对象交互。
- 对于同事对象，当自己发生变化的时候，不需要知道这会引起其他对象有什么变化，只需要通知中介者，然后由中介者去跟其他对象交互。
## 解决什么问题
用来解决开发过程中，多个类之间相互交互，并且交互情况很繁琐，导致每个类都必须知道所有需要交互的类，从而使得类与类之间的耦合关系很强。  
## 中介者模式结构和说明
- Mediator:中介者接口。其中定义各个同事类之间交互需要的方法，可以是公共的方法，也可以是小范围交互的方法。
- ConcreteMediator:中介者实现对象。需要了解并维护各个同事对象，并负责具体的协调各个同事对象之间的交互关系。
- Colleague:同事类的定义，通常为抽象类，负责约束同事对象的类型，并实现一些具体同事类之间的公共功能。
- ConcretecColleague:具体的同事类，实现自己的业务，并在需要与其他同事类通信的时候，就与持有的中介者通信，中介者会负责与其他同事交互。

## 中介者模式详解
### 功能：
中介者模式的功能就是封装对象之间的交互。例如，一个对象的某个操作需要引起其他一个或者很多对象的连带操作。而这个对象又不想自己维护这些对象的处理关系。
那么就可以通过中介者模式，在需要引起其他的对象变化的时候，通知中介者，然后由中介者来处理。

### 同事关系
中介者模式中，使用中介者对象来交互的那些对象称为同事类。中介者模式中，这些类必须继承相同的类。而且，这些类之间的相互交互非常复杂，所以需要将
该交互分离出去.

###同事和中介者关系
- 在中介者模式中，当一个同事对象发生了变化，需要主动通知中介者，让中介者去处理与其他同事对象相关的交互。
- 同事对象和中介者对象之间必须有关系。首先是同事对象需要知道中介者对象是谁；反过来，中介者对象也需要知道相关的同事对象。
- 中介者对象和同事对象之间是相互依赖的。

###如何实现同事和中介者的通信
同事对象发生变化需要去通知中介者，那么如何实现这种通信关系？
- 第一种方式：在中介者中定义一个特殊的通知接口，作为一个 通用的方法，让各个同事类来调用这个方法。
- 第二种方式：可以采用观察者模式，把Mediator实现成为观察者，而各个同事类实现成为Subject，这样同事类发生了改变，会通知中介者。
###是否需要中介者接口？
中介者是用来封装和处理同事对象的关系的，它一般是没有状态需要维护的，因此中介者可以实现为单例。所以不需要接口也可以。当然，如果需要多个中介者的
情况下，可以使用中介者接口来做一些约束。
###中介者对象是否需要持有所有同事类？
同事类的注入可以通过以下方式实现：
- 中介者处理的方法中创建或者获取。
- 从参数传入需要的同事对象。
- 中介者中通过set方法注入所以同事类。
###中介者只提供一个公共的方法来接受同事对象的通知吗?
可以根据不同的业务去调用中介者不同的通知方法，这样可以通过方法来区分是什么样的业务触发调用过来的，这样可以根据不同的业务，去引发同一个或者不同对象的
不同变化。
###如何简化中介者模式（简化后的中介者模式称为广义中介者）：
- 去掉同事对象的父类，这样可以让任意对象，只要需要相互交互就可以成为同事。
- 通常不定义Mediator接口，把具体的中介者对象实现为单例。
- 同事对象不再持有中介者，而是需要的时候直接获取中介者。
- 中介者不再持有同事类对象，而是通过入参传入或者在方法中创建/获取。
## 中介者模式优缺点
### 优点：
- 松散耦合
中介者模式把多个对象交互封装到中介者对象中，从而使得同事对象之间松散耦合，基本上可以做到互不依赖。这样一来，同事对象可以独立的变化和复用。
- 集中控制交互
多个同事对象的交互被封装到中介者对象里面集中管理。这样，当对象的交互行为发生变化时，只需要修改中介者对象就可以了。
- 多对多变成一对多
同事对象之间的多对多变成了中介者对象与同事对象之间的双向一对多。这样让对象的关系更容易理解和实现。
###缺点：
过度集中化。如果同事对象的交互非常多、交互非常复杂。这样会导致中介者对象变得十分复杂，难于管理和维护。
## 关于中介者的思考
###本质
封装交互
###适用场景：
- 若一组对象之间的通信方式比较复杂，导致相互依赖，结构混乱。可以采用中介者模式来管理交互，使得各个对象松散耦合，结构也更清晰易懂。
- 一个对象引用很多的对象， 并且直接跟这些对象交互，导致难以复用该对象，可以采用中介者模式。这样该对象只需要和中介者对象交互就可以了。