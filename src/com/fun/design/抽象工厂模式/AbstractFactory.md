# 抽象工厂模式---abstract factory
##定义：
提供一个创建一系列相关或相互依赖对象的接口，而无需指定它们具体的类。
##抽象工厂的形式
抽象工厂模式中，会定义一个抽象工厂，在里面虚拟的创建客户端需要的一系列对象。所谓虚拟的就是定义创建这些对象的抽象方法，并不去真正的实现，
然后由具体的抽象工厂的子类来提供这一系列对象的创建。这样一来可以为同一个抽象工厂提供很多不同的实现，而抽象工厂起一个约束作用，并未所有子类提供一个统一外观，让客户端使用。
##抽象工厂模式的构成
- Abstract Factory:抽象工厂，定义一系列产品对象的操作接口。
- Concrete Factory:具体的工厂，实现抽象工厂定义的方法，具体实现一系列产品对象的创建。是抽象工厂的子类。
- Abstract Product:定义一类产品对象的接口。
- Concrete Product:具体的产品实现对象。通常在具体的工厂里面，会选择具体的产品实现对象。
##抽象工厂模式定义详解：
抽象工厂的功能为一系列**相关**或**相互依赖**的对象创建一个接口。所以，抽象工厂接口中的方法不是任意放置的，而是一系列相关或相依赖的方法。他们组合的目的一定是为了
完成某个功能的。不能是为了完成不同的功能。从某种意义上看，抽象工厂其实是一个产品系列，或者产品簇。
##抽象工厂实现方式
一般实现为接口。如果要为这个产品簇提供公共的功能，可以实现为抽象类，但是一般不这么做。
##使用工厂方法
AbstractFactory定义了创建产品所需的接口，具体的实现延迟到子类去实现，而且子类需要选择多种具体的实现，所以AbstractFactory定义的创建产品的方法可以看成是工厂方法。
##抽象工厂的扩展
在抽象工厂中定义一个方法，然后根据该方法的传入参数去实现不同产品的实例。
这种方法不太安全，因为，只有一个方法，所以，在返回类型上就不能是特定的产品类型，只能是所有产品对象都继承或者实现的一个类型。或者直接用Object。
##抽象工厂模式的优缺点：
-优点：
  -分离接口和实现
  客户端使用抽象工厂来创建需要的对象，而客户端根本不知道具体的实现是谁，客户端只是面向产品的接口编程，跟产品的具体实现解耦。
  -切换产品簇容易
  抽象工厂的一个实现类就代表一种产品簇，客户在切换产品簇的时候只需要选择不同的工厂选择就行。
-缺点：
  -不太容易扩展新的产品
  如果需要给整个产品簇添加一个新的产品，那么就需要修改抽象工厂，这样就会导致所有的工厂实现都需要修改。前面扩展中提供了一个扩展方法来解决这个问题，但是有安全隐患。
  -容易造成类层次复杂
  针对抽象工厂的实现，如果抽象工厂的子类下面还有子类的话。那么客户端就需要一层层的选择，而抽象工厂的实现也需要分出层次来，每一层负责一种选择，也就是一层屏蔽一种变化。
##抽象工厂的本质
工厂模式是选择单个产品的实现，而抽象工厂是选择一个产品簇的实现。定义在抽象工厂里面的方法通常是有联系的，他们都是产品的某一部分或者是相互依赖的。
##使用场景（何时选用抽象工厂模式）
- 希望一个系统独立于它的产品的创建、组合和表示的时候。也就是一个系统只需要知道产品的接口，而不关心实现的时候。
- 一个系统要由多个产品系列中的一个来配置的时候，也就是可以动态切换产品簇的时候。
- 要强调一系列相关产品的接口，以便联合使用它们的时候。


