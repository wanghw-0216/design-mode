# 代理模式定义：
为其他对象提供一种代理以控制对这个对象的访问。
# 代理模式结构和说明:
## Proxy:代理对象，通常具有如下功能：
- 实现与具体的目标对象一样的接口，这样可以使用代理来代替具体的目标对象。
- 保存一个指向具体对象的引用，可以在需要的时候调用具体的目标对象。
- 可以控制对具体目标对象的访问，并可以负责创建和删除它。
## Subject：目标接口，定义代理和具体目标对象的接口，这样可以在任何使用具体目标对象的地方使用代理对象。
## RealSubject: 具体的目标对象，真正实现目标接口要求的功能。

# 模式讲解
## 代理模式的功能：
代理模式是通过创建一个代理对象，用这个代理对象去代表真实的对象，客户端得到这个代理对象以后，对客户端没有任何影响，就跟得到真实对象一样使用就可以。
当客户端在操作这个代理对象时，实际上最终的功能还是会由真实对象来完成，只不过是通过代理操作的。也就是客户端操作代理，代理操作真实对象。这样相当于
多了 一个中转，那么在中转的时候我们可以加入一些功能，来加强真实对象的功能。这样不会对原有对象造成代码侵入，又完善了原有代码的功能。
##  代理的分类：
- 虚代理：根据需要来创建开销很大的对象，该对象只有在需要的时候才会被真正创建。
- 远程代理：用来在不同的地址空间上代表同一个对象，这个不同的地址空间可以是在本机，也可以是在其他机器上。
- copy-on-write代理：在客户端操作的时候，只有对象确实改变了，才会真的拷贝一个目标对象，算是虚代理的一个分支。
- 保护代理：控制对原始对象的访问，如果有需要，可以给不同用户提供不同的访问权限，以控制他们对原始对象的访问。
- Cache代理：为昂贵操作的结果提供临时的存储空间，以便多个客户端可以共享这些结果。
- 防火墙代理：保护对象不被恶意用户访问和操作。
- 同步代理：使多个用户能够同时访问目标对象而没有冲突。
- 智能指引：在访问对象时执行一些附加操作，比如，对指向实际对象的引用计数、第一次引用一个持久对象时，将它装入内存等。
# JAVA中的代理
## java对代理模式提供了内建支持。在java.lang.reflect包下面，提供了一个Proxy的类和一个InvocationHandler的接口。
## 分类
- 静态代理（自己实现的方式）
- 动态代理（通过java提供的类来实现）
# 代理模式的特点
代理模式在客户和被客户访问的对象之间，引入了一定程度的间接性，客户是直接使用代理，让代理来与被访问的对象进行交互。不同的代理类型，这种附加的
间接性有不同的用途，也具有不同的特点。
- 远程代理：隐藏了一个对象存在于不同地址空间的事实，也即是客户通过远程代理去访问一个对象，根本不关心这个对象在哪里，也不关心如何通过网络去访问到这个对象。
- 虚代理：可以根据需要来创建"大"对象，只有到必须创建对象的时候，虚代理才会创建对象，从而大大加快程序运行速度，并节省资源。通过虚代理可以
对系统进行优化。
- 保护代理：可以在访问一个对象的前后，执行很多附加的操作，除了进行权限控制之外，还可以进行很多跟业务相关的处理，而不需要修改被代理的对象。也就是说可以通过
代理来给目标对象增加功能。
- 智能指引：和保护代理类似，也是允许在访问一个对象前后，执行很多附加的操作，这样一来可以做很多额外的事，比如，引用计数等。

# 适用场景
- 需要为一个对象在不同的地址空间提供局部代表的时候，可以使用远程代理。
- 需要按照需要创建开销很大的对象的时候，可以使用虚代理。
- 需要控制对原始对象的访问的时候，可以使用保护代理。
- 需要在访问对象执行一些附加操作的时候，可以使用智能指引代理。